```python
from bs4 import BeautifulSoup
import re


info = {
    'uid': '',
	'nickname': '',
    'charm': '',
	'age': '',
    'height': '',
	'weight': '',
	'province': '',
	'city': '',
	'education': '',
	'salary': '',
	'car': '',
	'house': '',
	'constellation': '',
	'minority': '',
	'zodiac': '',
	'blood_type': '',
    'marriage': ''
}

image = {
	'img_url': '',
	'img_num': ''
}

self_intro = "self_intro."

demand = {
	'demand_age': '',
	'demand_height': '',
	'demand_minority': '',
	'demand_education': '',
	'demand_photo': '',
	'demand_marriage': '',
	'demand_location': '',
	'demand_sincerity': ''
}
'''
lifestyle = {
	'smoke': '',
	'drink': '',
	'exercise': '',
	'eat': '',
	'shop': '',
	'faith': '',
	'time': '',
	'circle': '',
	'cost': ''
}
'''
'''
economic = {
	'salary': '',
	'car': '',
	'house': ''
}
'''

work = {
	'position': '',
	'industry': '',
	'university': '',
	'major': '',
	'language': ''
}

marriage = {
	'origin': '',
	'residence': '',
	'nationality': '',
	'personality': '',
	'humor': '',
	'temper': '',
	'marriage_attitude': '',
	'kid': '',
	'marriage_time': '',
	'share_house': '',
	'parents': '',
	'relatives': ''	
}

# maybe use a class
user = [info, image, self_intro, demand, work, marriage]
# print(user)

# parse data.
f = open("C:/users/SuperequS/desktop/test.txt", 'r')
web = f.read()
f.close()

soup = BeautifulSoup(web, "lxml")


# 全局定位方案，采用BOM迭代访问,下文中也采用了查找定位，查找的缺陷是后面的模块不好遍历
user_info = soup.find(class_='content_705')
# BOM树遍历
# 自我介绍
self_intro_div = user_info.div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 爱情DNA
self_DNA_div = self_intro_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 择偶要求
self_demand_div = self_DNA_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 生活方式
self_style_div = self_demand_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 经济实力
self_economic_div = self_style_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 工作学习
self_work_div = self_economic_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling
# 婚姻观念
self_marriage_div = self_work_div.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling.next_sibling



# html = soup.prettify()

#-----***-----
# h4 data: nickname, uid
tag = soup.h4.text
# user nickname
user[0]['nickname'] = (re.findall(u"[\u4e00-\u9fa5]+",tag))[0]
#user uid
user[0]['uid'] = (re.findall(u"[0-9]+",tag))[0]

# h6 data: charm
tag = soup.h6.text
user[0]['charm'] = tag

#user info.
tag = soup.find(class_='member_name').text
user[0]['age'] = (re.findall(u"[0-9]+",tag))[0]
user[0]['marriage'] = (re.findall(r"岁，(.+?)，来", tag))[0]
user[0]['province'] = soup.find(class_='member_name').a.text
user[0]['city'] = soup.find(class_='member_name').a.next_sibling.text

#user info detail.
tag = soup.find(class_='member_info_list fn-clear')

# list obj.
education = tag.li
user[0]['education'] = education.em.text

height = education.next_sibling.next_sibling
user[0]['height'] = (re.findall(u"[0-9]+",height.em.text))[0]

car = height.next_sibling.next_sibling
user[0]['car'] = car.em.text

salary = car.next_sibling.next_sibling
user[0]['salary'] = salary.em.text

house = salary.next_sibling.next_sibling
user[0]['house'] =  house.em.text

weight = house.next_sibling.next_sibling
user[0]['weight'] = (re.findall(u"[0-9]+",weight.em.text))[0]

constellation = weight.next_sibling.next_sibling
user[0]['constellation'] = constellation.em.text

minority = constellation.next_sibling.next_sibling
user[0]['minority'] = minority.em.text

zodiac = minority.next_sibling.next_sibling
user[0]['zodiac'] = zodiac.em.text

blood_type = zodiac.next_sibling.next_sibling
user[0]['blood_type'] = blood_type.em.text

# self image.
tag = soup.find(class_='big_pic fn-clear')
attr = tag.ul.li.a.next_element.attrs # url 位于书标签属性之中，返回属性dict
user[1]['img_url'] = attr['_src']

img_num = soup.find(class_='pho_ico').text
user[1]['img_num'] = img_num.strip() # remove subspace.

# self intro.
user_info = soup.find(class_='js_text').text
user[2] = user_info.strip() # remove subspace.

#demand info.
tag = soup.find(class_='js_list fn-clear')

demand_age = tag.li
user[3]['demand_age'] = demand_age.div.text

demand_height = demand_age.next_sibling.next_sibling
user[3]['demand_height'] = demand_height.div.text

demand_minority = demand_height.next_sibling.next_sibling
user[3]['demand_minority'] = demand_minority.div.text

demand_education = demand_minority.next_sibling.next_sibling
user[3]['demand_education'] = demand_education.div.text

demand_photo = demand_education.next_sibling.next_sibling
user[3]['demand_photo'] = demand_photo.div.text

demand_marriage = demand_photo.next_sibling.next_sibling
user[3]['demand_marriage'] = demand_marriage.div.text

demand_location = demand_marriage.next_sibling.next_sibling
user[3]['demand_location'] = demand_location.div.text

demand_sincerity = demand_location.next_sibling.next_sibling
user[3]['demand_sincerity'] = demand_sincerity.div.text

# work info.
tag = self_work_div
# 工作信息
work_item = tag.ul
work = work_item.li
user[4]['position'] = work.em.text

industry = work.next_sibling.next_sibling
user[4]['industry'] = industry.em.text

# 学习信息
study_item = tag.ul.next_sibling.next_sibling.next_sibling.next_sibling
university = study_item.li
user[4]['university'] = university.em.text

major = university.next_sibling.next_sibling
user[4]['major'] = major.em.text

language = major.next_sibling.next_sibling
user[4]['language'] = language.em.text

# marriage info.
tag = self_marriage_div
# 关于自己
self_item = tag.ul
about_self = self_item.li
user[5]['origin'] = about_self.em.text

residence = about_self.next_sibling.next_sibling
user[5]['residence'] = residence.em.text

nationality = residence.next_sibling.next_sibling
user[5]['nationality'] = nationality.em.text

personality = nationality.next_sibling.next_sibling
user[5]['personality'] = personality.em.text

humor = personality.next_sibling.next_sibling
user[5]['humor'] = humor.em.text

temper = humor.next_sibling.next_sibling
user[5]['temper'] = temper.em.text

marriage_attitude = temper.next_sibling.next_sibling
user[5]['marriage_attitude'] = marriage_attitude.em.text

kid = marriage_attitude.next_sibling.next_sibling
user[5]['kid'] = kid.em.text

marriage_time = kid.next_sibling.next_sibling
user[5]['marriage_time'] = marriage_time.em.text



# 关于家庭
family_item = tag.ul.next_sibling.next_sibling.next_sibling.next_sibling
share_house = family_item.li
user[5]['share_house'] = share_house.em.text

relatives = share_house.next_sibling.next_sibling
user[5]['relatives'] = relatives.em.text

parents = relatives.next_sibling.next_sibling
user[5]['parents'] = parents.em.text


print(user)

f = open("C:/users/superequs/desktop/data_extract.txt",'w')
f.write(str(user))
f.close()
```

