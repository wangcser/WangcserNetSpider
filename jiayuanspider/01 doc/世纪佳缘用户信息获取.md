# 世纪佳缘用户信息获取

## 搜索页面分析

- 搜索地址分析

 ```http
http://search.jiayuan.com/v2/index.php?key=&sex=f&stc=&sn=default&sv=1&p=1&pt=65433&ft=off&f=select&mt=d
 ```
|  字段  |                    解析                    |      |
| :--: | :--------------------------------------: | ---- |
| key= |         热搜关键词中的信息，传递中文信息，如“形象好”          |      |
| sex= |                f 女性 m 男性                 |      |
| stc= | 地区代码，1:1101，第一个1代表地区信息，第二段代表具体的区域，同时也包含了年龄信息，逗号个隔开，2:18,20，2（代表年龄），一共有21种信息 |      |
| sn=  | 排序方式，default 综合排序，charm 魅力值降序，last_login 登录时间降序 |      |
| sv=  |                    DK                    |      |
|  p=  |                    页码                    |      |
| pt=  |                    DK                    |      |
| ft=  |                    DK                    |      |
|  f=  |                  select                  |      |
| mt=  |                    DK                    |      |

简化的链接

```
http://search.jiayuan.com/v2/index.php?p=2
```

## 搜索结果分析

大图模式每页有24个用户，列表模式每页10个用户，为什么是24呢，因为多一个位置用来放广告了

## 返回结果分析

通过访问佳缘搜索接口，系统返回json格式数据，可通过response.body访问，并以json解析

```python
json_data = json.loads(response.body)	
```

- json数据使用了三层嵌套，首先是dict数据，需要的信息放在userInfo字段中，为list类型
- list中使用下标访问各个用户,userInfo含有10个用户,express_search(快速搜索)含有10个用户
- 佳缘不能抓UID，只能抓realuid

## uid的文件读写

```
js = json.loads(response.body)
user_info = js['userInfo']
f = open('jiayuan_real_uid_data.txt','a')

for item in user_info:
    uid = item['realUid']
    data_in_str = 'realuid:' + str(uid) + '\n'
    f.write(data_in_str)

f.close()
```

