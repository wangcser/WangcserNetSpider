# 世纪佳缘爬取信息分析

## 会员信息地址构成

www.jiayuan.com/XXXYYYZZZ（1开头的9位数字）

## 页面有用的会员信息

以下信息全部爬取，用于与其他网站比对

- 用户头像，250*250
- 用户昵称，中英文皆可
- 用户ID（UID），9位数字
- 年龄，AGE
- 地址，精确到市，省份和城市是分开给出的
- 身高，3位数字
- 星座，
- 属相，
- 民族，

## 页面信息编码分析

- 用户头像，头像的图片地址首地址不一致，头像地址由页面解析给出，头像图片同步下载下来，用UID命名存储在本地，方便以后做比对。

  ```
  http://at2.jyimg.com/de/e8/19aqff72c10aaa4b993115261e8e/19adff72c_3_avatar_square_p.jpg
  http://t1.jyimg.com/07/4d/716c3be05d8f811c0f017d4099bf/140713885d.jpg
  http://t2.jyimg.com/98/a5/ba780d0997eac15135e7c5081e08/141426785d.jpg
  http://t1.jyimg.com/4c/37/4d363448553a6f8ae1c16ec35806/139735120d.jpg
  http://t4.jyimg.com/71/14/a3074baf022c8bca0b6bc2962941/135470398d.jpg
  ```

- 用户昵称等信息

  ```

  ```

## 用户信息爬取分析

用户地址：www.jiayuan.com/uid

使用GET请求即可，请求时登录信息（cookie）写入header中，可保持登录状态。

可获得：

- 基本信息
  - nickname，uid，age， marrage,location,education,height,购车，住房，体重，星座，民族，属相，血型
- 自我介绍
- 择偶要求
  - 年龄，身高，民族，学历，相册，婚姻状况，居住地，诚信（含必须符合条件）
- 经济实力
- 工作学习
- 婚姻观念

## 数据库设计

```
db_name：[MM-DD HH:MM] f/m user_info.db
id INTEGER PRIMARY KEY AUTOINCREMENT
uid TEXT UNIQUE
nickname CHAR(50)
age INTEGER
height INTEGER
魅力值
```

# 数据处理

http://www.jiayuan.com/166078764

先用scrapy css—selector解析，也要把html下载下来，方便其他解析方式

```
response.selector.css('.member_info_r.yh>h4>span::text').extract()
***
id 
nickname .member_info_r.yh>h4
uid .member_info_r.yh>h4>span
***
age,marrage:(28岁，未婚，来自) .member_name
省份 css不行，得用xpath
学历到血型信息 .fl.pr>em 返回list
购车，月薪，住房信息不可得（异步加载），经济实力类都是异步加载
自我介绍 .js_text
择偶标准 .ifno_r_con 返回list，设定一个大list
生活方式 .ifno_r_con>em 返回大list
```